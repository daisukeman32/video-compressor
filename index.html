<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Compressor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.11.6/dist/ffmpeg.min.js" crossorigin></script>
    <style>
        :root {
            --bg: #fff;
            --fg: #000;
            --gray: #666;
            --light-gray: #ddd;
            --hover-bg: #f5f5f5;
        }

        [data-theme="dark"] {
            --bg: #0a0a0a;
            --fg: #fff;
            --gray: #888;
            --light-gray: #333;
            --hover-bg: #1a1a1a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--bg);
            color: var(--fg);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 60px 20px;
            transition: background 0.3s, color 0.3s;
        }

        .header {
            width: 100%;
            max-width: 480px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 50px;
        }

        h1 {
            font-size: 13px;
            font-weight: 500;
            letter-spacing: 0.15em;
            text-transform: uppercase;
        }

        .theme-toggle {
            background: none;
            border: 1px solid var(--fg);
            width: 36px;
            height: 36px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .theme-toggle:hover {
            background: var(--hover-bg);
        }

        .theme-toggle svg {
            width: 18px;
            height: 18px;
            stroke: var(--fg);
            stroke-width: 1.5;
            fill: none;
        }

        .sun-icon { display: none; }
        .moon-icon { display: block; }

        [data-theme="dark"] .sun-icon { display: block; }
        [data-theme="dark"] .moon-icon { display: none; }

        .container {
            width: 100%;
            max-width: 480px;
        }

        .drop-zone {
            border: 1px solid var(--fg);
            padding: 60px 20px;
            text-align: center;
            cursor: pointer;
            transition: background 0.2s;
        }

        .drop-zone:hover,
        .drop-zone.drag-over {
            background: var(--hover-bg);
        }

        .drop-zone.hidden {
            display: none;
        }

        .drop-zone svg {
            width: 28px;
            height: 28px;
            margin-bottom: 16px;
            stroke: var(--fg);
            stroke-width: 1.5;
            fill: none;
        }

        .drop-zone p {
            font-size: 12px;
            color: var(--gray);
        }

        #fileInput {
            display: none;
        }

        .preview {
            display: none;
            border: 1px solid var(--fg);
        }

        .preview.show {
            display: block;
        }

        .preview video {
            width: 100%;
            display: block;
            background: #000;
        }

        .preview-info {
            padding: 16px;
            border-top: 1px solid var(--light-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .preview-info .name {
            font-size: 12px;
            max-width: 70%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .preview-info .size {
            font-size: 11px;
            color: var(--gray);
        }

        .change-btn {
            font-size: 11px;
            color: var(--gray);
            background: none;
            border: none;
            cursor: pointer;
            text-decoration: underline;
        }

        .change-btn:hover {
            color: var(--fg);
        }

        .options {
            display: none;
            padding: 24px 0;
        }

        .options.show {
            display: block;
        }

        .options label {
            display: block;
            font-size: 10px;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--gray);
            margin-bottom: 12px;
        }

        .quality-options {
            display: flex;
            gap: 8px;
        }

        .quality-option {
            flex: 1;
            padding: 16px 8px;
            border: 1px solid var(--light-gray);
            background: var(--bg);
            color: var(--fg);
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-family: inherit;
        }

        .quality-option:hover {
            border-color: var(--fg);
        }

        .quality-option.selected {
            border-color: var(--fg);
            background: var(--fg);
            color: var(--bg);
        }

        .quality-option .label {
            font-size: 12px;
            font-weight: 500;
        }

        .quality-option .desc {
            font-size: 10px;
            color: var(--gray);
            margin-top: 4px;
        }

        .quality-option.selected .desc {
            color: var(--gray);
        }

        .compress-btn {
            width: 100%;
            padding: 16px;
            border: none;
            background: var(--fg);
            color: var(--bg);
            font-size: 12px;
            font-weight: 500;
            font-family: inherit;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            cursor: pointer;
            transition: opacity 0.2s;
            display: none;
        }

        .compress-btn.show {
            display: block;
        }

        .compress-btn:hover {
            opacity: 0.8;
        }

        .compress-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .progress-container {
            display: none;
            padding: 24px 0;
        }

        .progress-container.show {
            display: block;
        }

        .progress-bar {
            height: 2px;
            background: var(--light-gray);
        }

        .progress-fill {
            height: 100%;
            background: var(--fg);
            width: 0%;
            transition: width 0.3s;
        }

        .progress-text {
            text-align: center;
            margin-top: 12px;
            font-size: 11px;
            color: var(--gray);
        }

        .result {
            display: none;
            border: 1px solid var(--fg);
            padding: 24px;
            margin-top: 24px;
        }

        .result.show {
            display: block;
        }

        .result h3 {
            font-size: 10px;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            margin-bottom: 20px;
        }

        .result .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .result .stat {
            text-align: center;
        }

        .result .stat .value {
            font-size: 16px;
            font-weight: 500;
        }

        .result .stat .label {
            font-size: 9px;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-top: 4px;
        }

        .download-btn {
            width: 100%;
            padding: 14px;
            border: 1px solid var(--fg);
            background: var(--bg);
            color: var(--fg);
            font-size: 11px;
            font-weight: 500;
            font-family: inherit;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s;
        }

        .download-btn:hover {
            background: var(--fg);
            color: var(--bg);
        }

        .error {
            display: none;
            border: 1px solid var(--fg);
            padding: 16px;
            margin-top: 16px;
            font-size: 12px;
        }

        .error.show {
            display: block;
        }

        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg);
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 1000;
        }

        .loading-overlay.show {
            display: flex;
        }

        .spinner {
            width: 24px;
            height: 24px;
            border: 1px solid var(--light-gray);
            border-top-color: var(--fg);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            margin-top: 20px;
            font-size: 12px;
            color: var(--gray);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Video Compressor</h1>
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
            <svg class="moon-icon" viewBox="0 0 24 24">
                <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <svg class="sun-icon" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="5"/>
                <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke-linecap="round"/>
            </svg>
        </button>
    </div>

    <div class="container">
        <div class="drop-zone" id="dropZone">
            <svg viewBox="0 0 24 24">
                <path d="M12 5v14M5 12l7-7 7 7" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <p>Drop video file or click to select</p>
            <input type="file" id="fileInput" accept="video/*">
        </div>

        <div class="preview" id="preview">
            <video id="videoPreview" controls></video>
            <div class="preview-info">
                <div>
                    <div class="name" id="fileName"></div>
                    <div class="size" id="fileSize"></div>
                </div>
                <button class="change-btn" id="changeBtn">Change</button>
            </div>
        </div>

        <div class="options" id="options">
            <label>Compression</label>
            <div class="quality-options">
                <button class="quality-option" data-quality="high">
                    <div class="label">Light</div>
                    <div class="desc">~70%</div>
                </button>
                <button class="quality-option selected" data-quality="medium">
                    <div class="label">Medium</div>
                    <div class="desc">~50%</div>
                </button>
                <button class="quality-option" data-quality="low">
                    <div class="label">Strong</div>
                    <div class="desc">~30%</div>
                </button>
            </div>
        </div>

        <button class="compress-btn" id="compressBtn">Compress</button>

        <div class="progress-container" id="progressContainer">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Processing...</div>
        </div>

        <div class="result" id="result">
            <h3>Complete</h3>
            <div class="stats">
                <div class="stat">
                    <div class="value" id="originalSize">-</div>
                    <div class="label">Original</div>
                </div>
                <div class="stat">
                    <div class="value" id="compressedSize">-</div>
                    <div class="label">Compressed</div>
                </div>
                <div class="stat">
                    <div class="value" id="reduction">-</div>
                    <div class="label">Reduced</div>
                </div>
            </div>
            <button class="download-btn" id="downloadBtn">Download</button>
        </div>

        <div class="error" id="error"></div>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <div class="loading-text" id="loadingText">Loading FFmpeg...</div>
    </div>

    <script src="app.js"></script>
</body>
</html>
